defmodule Mjw.Game do
  @all_tiles ~w(
    ğŸ€€ ğŸ€ ğŸ€‚ ğŸ€ƒ ğŸ€„ ğŸ€… ğŸ€† ğŸ€‡ ğŸ€ˆ ğŸ€‰ ğŸ€Š ğŸ€‹ ğŸ€Œ ğŸ€ ğŸ€ ğŸ€ ğŸ€ ğŸ€‘ ğŸ€’ ğŸ€“ ğŸ€” ğŸ€• ğŸ€– ğŸ€— ğŸ€˜ ğŸ€™ ğŸ€š ğŸ€› ğŸ€œ ğŸ€ ğŸ€ ğŸ€Ÿ ğŸ€  ğŸ€¡
    ğŸ€€ ğŸ€ ğŸ€‚ ğŸ€ƒ ğŸ€„ ğŸ€… ğŸ€† ğŸ€‡ ğŸ€ˆ ğŸ€‰ ğŸ€Š ğŸ€‹ ğŸ€Œ ğŸ€ ğŸ€ ğŸ€ ğŸ€ ğŸ€‘ ğŸ€’ ğŸ€“ ğŸ€” ğŸ€• ğŸ€– ğŸ€— ğŸ€˜ ğŸ€™ ğŸ€š ğŸ€› ğŸ€œ ğŸ€ ğŸ€ ğŸ€Ÿ ğŸ€  ğŸ€¡
    ğŸ€€ ğŸ€ ğŸ€‚ ğŸ€ƒ ğŸ€„ ğŸ€… ğŸ€† ğŸ€‡ ğŸ€ˆ ğŸ€‰ ğŸ€Š ğŸ€‹ ğŸ€Œ ğŸ€ ğŸ€ ğŸ€ ğŸ€ ğŸ€‘ ğŸ€’ ğŸ€“ ğŸ€” ğŸ€• ğŸ€– ğŸ€— ğŸ€˜ ğŸ€™ ğŸ€š ğŸ€› ğŸ€œ ğŸ€ ğŸ€ ğŸ€Ÿ ğŸ€  ğŸ€¡
    ğŸ€€ ğŸ€ ğŸ€‚ ğŸ€ƒ ğŸ€„ ğŸ€… ğŸ€† ğŸ€‡ ğŸ€ˆ ğŸ€‰ ğŸ€Š ğŸ€‹ ğŸ€Œ ğŸ€ ğŸ€ ğŸ€ ğŸ€ ğŸ€‘ ğŸ€’ ğŸ€“ ğŸ€” ğŸ€• ğŸ€– ğŸ€— ğŸ€˜ ğŸ€™ ğŸ€š ğŸ€› ğŸ€œ ğŸ€ ğŸ€ ğŸ€Ÿ ğŸ€  ğŸ€¡
  )

  defstruct id: nil, deck: [], discards: [], wind: "ğŸ€€", seats: []

  @doc """
  Create a game with some initial values:
  - random ID
  - shuffled deck
  - 4 empty seats
  """
  def new do
    %__MODULE__{
      id: UUID.uuid4(),
      deck: Enum.shuffle(@all_tiles),
      seats: 0..3 |> Enum.map(fn _ -> %Mjw.Seat{} end)
    }
  end
end
